- name: Include operating specific variables.
  include_vars: "{{ ansible_os_family | lower }}.yml"

- name: Ensure iSCSI packages are installed and configured.
  import_role:
    name: iscsi
    tasks_from: configure.yml

- name: Ensure InfiniBand IPoIB is installed and configured.
  import_role:
    name: ipoib

- name: Ensure InfiniBand iSER kernel modules are installed.
  import_tasks: module.yml

- name: Configure iSCSI interface bindings for InfiniBand iSER.
  import_tasks: iscsi_interface.yml

- name: Update storage system facts.
  import_role:
    name: netapp_eseries.host.common
    tasks_from: gather_storage_facts.yml

- name: Discover mapped-volume information from associated storage systems.
  import_role:
    name: netapp_eseries.host.common
    tasks_from: volume_facts.yml

- name: Ensure InfiniBand iSER iSCSI sessions are configured.
  import_tasks: session.yml
