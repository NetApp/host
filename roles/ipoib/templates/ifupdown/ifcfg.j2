# Managed by NetApp E-Series Ansible
{% if ansible_os_family | lower == "redhat" %}

DEVICE={{ item["name"] }}
BOOTPROTO=none
ONBOOT=yes
IPADDR={{ item["address"] | ansible.netcommon.ipaddr("address") }}
PREFIX={{ item["address"] | ansible.netcommon.ipaddr("prefix") }}
{% if item["mtu"] is defined or eseries_ipoib_mtu is defined %}
MTU={{ item["mtu"] | default(eseries_ipoib_mtu) }}
{% endif %}
{% if item["zone"] is defined or eseries_ipoib_firewall_zone is defined or eseries_common_firewall_zone is defined %}
ZONE={{ item["zone"] | default(eseries_ipoib_firewall_zone | default(eseries_common_firewall_zone)) }}
{% endif %}
TYPE=InfiniBand

{% elif ansible_os_family | lower == "suse" %}

LABEL={{ item["name"] }}
STARTMODE=auto
BOOTPROTO=static
IPADDR={{ item["address"] }}
{% if item["mtu"] is defined or eseries_ipoib_mtu is defined %}
MTU={{ item["mtu"] | default(eseries_ipoib_mtu) }}
{% endif %}
{% if item["zone"] is defined or eseries_ipoib_firewall_zone is defined or eseries_common_firewall_zone is defined %}
ZONE={{ item["zone"] | default(eseries_ipoib_firewall_zone | default(eseries_common_firewall_zone)) }}
{% endif %}
INTERFACETYPE=InfiniBand

{% elif ansible_os_family | lower == "debian" %}
auto {{ item["name"] }}
iface {{ item["name"] }} inet static
    address   {{ item["address"] }}
{% if item["mtu"] is defined or eseries_ipoib_mtu is defined %}
    mtu       {{ item["mtu"] | default(eseries_ipoib_mtu) }}
{% endif %}
{% endif %}
